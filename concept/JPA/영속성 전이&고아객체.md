### JPA(Java Persistence API)에서 영속성 전이
부모 엔티티의 상태 변화가 자식 엔티티에 영향을 미치는 것을 의미합니다. 즉, 부모 엔티티의 영속성 상태 변화가 자식 엔티티에도 자동으로 전이되는 것을 말합니다.

주로 부모 엔티티와 자식 엔티티 간의 관계를 다룰 때 사용됩니다. 예를 들어, 부모 엔티티를 저장할 때 자식 엔티티도 함께 저장되거나, 부모 엔티티를 삭제할 때 자식 엔티티도 함께 삭제되는 경우가 있습니다.

JPA에서는 다양한 종류의 영속성 전이를 지원합니다. 대표적인 영속성 전이 종류로는 다음과 같은 것들이 있습니다:

1. CascadeType.ALL: 모든 영속성 상태 변화를 자식 엔티티에 전이시킵니다. 즉, 부모 엔티티의 모든 상태 변화(영속화, 수정, 삭제 등)가 자식 엔티티에도 적용됩니다.
2. CascadeType.PERSIST: 영속화 상태 변화를 자식 엔티티에 전이시킵니다. 부모 엔티티가 영속화될 때 자식 엔티티도 함께 영속화됩니다.
3. CascadeType.MERGE: 병합 상태 변화를 자식 엔티티에 전이시킵니다. 부모 엔티티가 병합될 때 자식 엔티티도 함께 병합됩니다.
4. CascadeType.REMOVE: 삭제 상태 변화를 자식 엔티티에 전이시킵니다. 부모 엔티티가 삭제될 때 자식 엔티티도 함께 삭제됩니다.
5. CascadeType.REFRESH: 새로고침 상태 변화를 자식 엔티티에 전이시킵니다. 부모 엔티티가 새로고침될 때 자식 엔티티도 함께 새로고침됩니다.

영속성 전이를 사용하면 부모-자식 관계를 더 쉽게 다룰 수 있으며, 코드를 더 간결하고 유지보수하기 쉽게 만들어 줍니다.

---

고아 객체(orphan object)는 부모 엔티티와의 관계가 끊겨서 더 이상 관리되지 않는 자식 엔티티를 말합니다. 즉, 부모 엔티티와의 연관 관계가 끊어진 상태입니다.

영속성 전이와 관련하여, 부모 엔티티와 자식 엔티티 간의 관계를 설정할 때 부모 엔티티를 삭제하면 자식 엔티티도 함께 삭제되도록 설정할 수 있습니다. 이때 만약 자식 엔티티의 부모 엔티티와의 연관 관계가 끊겨버린다면, 이 자식 엔티티는 고아 객체가 됩니다.

고아 객체가 되면 해당 객체는 영속성 컨텍스트에서 관리되지 않게 되며, 따라서 데이터베이스에서도 삭제될 수 있습니다. 이것은 데이터베이스의 외래 키 제약 조건에 따라 자식 엔티티가 삭제되는 것과 관련이 있습니다.

JPA에서는 CascadeType.REMOVE와 함께 고아 객체 기능을 제공합니다. 이를 통해 부모 엔티티에서 자식 엔티티의 연관 관계를 끊을 때 자식 엔티티가 자동으로 삭제되도록 할 수 있습니다.
